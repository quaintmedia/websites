jQuery.log=function(b){if(window.console){console.debug(b)}else{alert(b)}};(function(b){b.fn.slider=function(a){var q={duration:100,autoPlay:false,autoPlayDuration:5000,ieOpacityElems:" "},o=0,n,r=new Array();q=b.extend(q,a);var p=q.duration,m=q.ieOpacityElems.split(" "),s=b(this);function l(){e=r[o];e.load(function(){d=b(window).width();if(o==0){s.height("auto");var c=s.height();var d=b(window).width();if(d<980){slideWidth=d;imgRatio=(d/980);c=parseInt(457*imgRatio)}else{c=457}s.find(".loader").fadeOut(function(){s.animate({height:c},{duration:500,complete:function(){s.css({transition:"all 0.5s ease"});s.addClass("loaded");s.find(".slidesSet").fadeIn()}})})}if(o<r.length-1){o++;l()}});if(e[0].complete){e.load()}}return s.each(function(){b(window).resize(function(){var t=b(this).width();if(t<980){F=t;imgRatio=(t/980);d=parseInt(457*imgRatio);s.find("ul.slides li.slide").width(F).height(d);s.height(d)}else{F=980;d=457;s.find("ul.slides li.slide").width(F).height(d);s.height(d)}curSlideNo=parseInt(s.find("ul.slides li.current").index());slidesAdjust=curSlideNo*F*-1;s.find("ul.slides").css({"margin-left":slidesAdjust});s.find("ul.slides").width(c.length*F)});var f=b.browser.msie,M=b.browser.version,P=s.find("ul.slides"),c=P.find("li.slide"),F=c.width(),d=c.height(),I=s.find(".thumbs"),O=I.find("li"),K=s.find(".thumbs li img").height(),g=parseInt(d+K),H=c.length,i=s.find(".prv"),k=s.find(".nxt"),J=false,j=s.find(".slidesViews .slide"),G=s.find(".slidesViews .grid"),L=0,N={slides:P,nav:s.find(".controls .nav"),thumbs:s.find(".slidesSet .thumbs")},h;b(window).resize();b.each(c,function(u,t){t=b(t);t.find(".slideNo .b .no").html(t.index()+1);t.find(".slideNo .b .ttl").html(H);t.attr({slideNo:t.index()+1});eImg=t.find("figure img");r.push(eImg)});P.prepend(P.find("li.slide:last-child"));P.css({"margin-left":-F});P.find(".current .byNo").css({display:"block",opacity:1}).animate({opacity:1},p*2,"easeInOutQuint");P.find(".current .desc").css({display:"block",opacity:1}).animate({opacity:1},p*2,"easeInOutQuint",function(){b(this).show()});if(f){if(M.indexOf(6)!=-1){s.find(".wrapper").height(g+"px")}if(M<=8){b.each(m,function(u,t){c.not(".current").find(t).animate({opacity:0.5})})}}else{var Q="opacity "+(p/1000)+"s ease";c.css({transition:Q});O.css({transition:Q})}P.width(c.width()*H);i.click(function(){if(!J){moveSlides({step:"prev"});J=true}});k.click(function(){if(!J){moveSlides({step:"next"});J=true}});O.click(function(){if(q.autoPlay==true){clearTimeout(n);q.autoPlay=false}moveSlides({step:b(this).index()+1})});G.click(function(){b(this).parent().find(".selected").removeClass("selected");b(this).addClass("selected");wrapper.animate({height:h.height()},p*2);h.fadeIn(p*2);b.each(N,function(u,t){t.fadeOut(p*2)})});j.click(function(){b(this).parent().find(".selected").removeClass("selected");b(this).addClass("selected");h.fadeOut(p*2);wrapper.animate({height:s.find(".topSlides .slides").height()},p*2);b.each(N,function(u,t){t.fadeIn(p*2)})});b(document).keydown(function(t){var u=t.keyCode;if(!J){switch(u){case 37:i.click();J=true;break;case 39:k.click();J=true;break}}});moveSlides=function(t){var w=P.find(".current"),v,u;if(t.step=="prev"){v=w.prev(".slide");if(v.index()==0){P.prepend(P.find("li.slide:last-child"));P.css({"margin-left":parseInt(P.css("margin-left"))-F})}u=parseInt(P.css("margin-left"))+F}else{if(t.step=="next"){v=w.next(".slide");if(v.index()==P.find("li.slide:last-child").index()){P.append(P.find("li.slide:first-child"));P.css({"margin-left":parseInt(P.css("margin-left"))+F})}u=parseInt(P.css("margin-left"))-F}else{if(!isNaN(t.step)){v=s.find('.slides li[slideno="'+(t.step)+'"]');if(v.index()==0){P.prepend(P.find("li.slide:last-child"));P.css({"margin-left":parseInt(P.css("margin-left"))-F})}else{if(v.index()==P.find("li.slide:last-child").index()){P.css({"margin-left":parseInt(P.css("margin-left"))+F});P.append(P.find("li.slide:first-child"))}}u=parseInt(P.css("margin-left"))-v.position().left}}}v.find(".byNo").css({display:"block",opacity:0}).animate({opacity:1},p);w.find(".byNo").animate({opacity:1},p,function(){});v.find(".desc").css({display:"block",opacity:0}).animate({opacity:1},p);w.find(".desc").animate({opacity:1},p,function(){});P.animate({"margin-left":u},p,"easeInOutQuint",function(){J=false});if(f){b.each(m,function(y,x){w.find(x).animate({opacity:0.5},p)});b.each(m,function(y,x){v.find(x).animate({opacity:1},p)})}nxtSlideNo=v.find(".slideNo .no").html();w.removeClass("current");v.addClass("current");I.find(".current").removeClass("current");I.find("li:nth-child("+nxtSlideNo+")").addClass("current")};if(q.autoPlay==true){b.fx.interval=160;b.fx.off=false;n=setInterval(function(){k.click()},q.autoPlayDuration)}l()})}})(jQuery);